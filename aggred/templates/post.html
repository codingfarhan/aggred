{% load static %} {% block content %} {% include "base.html" %}


<link rel="stylesheet" href="{% static 'css/popup_form.css' %}">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css">

<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js" integrity="sha384-b/U6ypiBEHpOf/4+1nzFpr53nxSS+GLCkfwBdFNTxtclqqenISfwAzpKaMNFNmj4" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"></script>


<!-- POPUP POST A QUESTION FORM  -->


<div class="content" id="popup_form">

    <div class="container">

        <div class="row align-items-stretch justify-content-center no-gutters">

            <div class="col-md-7" id="white-content">

                <div class="form h-100 contact-wrap p-5">

                    <a onclick="close_popup('popup_form');" id="close_btn"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-x-lg" viewBox="0 0 16 16">
                        <path d="M1.293 1.293a1 1 0 0 1 1.414 0L8 6.586l5.293-5.293a1 1 0 1 1 1.414 1.414L9.414 8l5.293 5.293a1 1 0 0 1-1.414 1.414L8 9.414l-5.293 5.293a1 1 0 0 1-1.414-1.414L6.586 8 1.293 2.707a1 1 0 0 1 0-1.414z"/>
                      </svg></a>
                    <h3 class="text-center" id="form-heading"></h3>
                    <form class="mb-5 text-center" method="post" id="contactForm" name="contactForm">
                        {% csrf_token %}
                        <div class="row">
                            <div class="col-md-12 form-group mb-3" id="form-title">
                                <label for="" class="col-form-label">Title *</label>
                                <input type="text" class="form-control" name="title" id="name" placeholder="Your question...">
                            </div>
                            <!-- <div class="col-md-6 form-group mb-3">
                                <label for="" class="col-form-label">Email *</label>
                                <input type="email" class="form-control" name="email" id="email" placeholder="Your email">
                            </div> -->
                        </div>

                        <!-- <div class="row">
                            <div class="col-md-12 form-group mb-3">
                                <label for="budget" class="col-form-label">Subject</label>
                                <input type="text" class="form-control" name="subject" id="subject" placeholder="Your subject">
                            </div>
                        </div> -->

                        <div class="row mb-5">
                            <div class="col-md-12 form-group mb-3">
                                <label for="message" class="col-form-label" id="explanation"></label>
                                <textarea class="form-control" name="details" id="explanation" cols="30" rows="4" placeholder="Write about the problem in detail."></textarea>
                            </div>
                        </div>
                        <div class="row justify-content-center">
                            <div class="col-md-5 form-group text-center">
                                <input type="submit" name="submit_btn" class="btn btn-block btn-primary rounded-0 py-2 px-4" id="form-btn">
                                <span class="submitting"></span>
                            </div>
                        </div>
                    </form>

                    <!-- <div id="form-message-warning mt-4"></div> -->
                    <!-- <div id="form-message-success">
                        Your message was sent, thank you!
                    </div> -->

                </div>
            </div>
        </div>
    </div>

</div>


<!-- POPUP QUESTION FORM ENDS  -->











<div class="post">
    <div class="card" style="width: 100vw;">
        <ul class="list-group list-group-flush">
            <li class="list-group-item">
                <img src="data:image/png;base64,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"
                    style="float: left;">
                <a>
                    <a style="float: right;">
                    {{post_date}}
                </a>
                    <p style="padding-top: 0.3%; font-size: 110%;">&nbsp;&nbsp;&nbsp;&nbsp;{{full_name}}</p>
                    <p style="font-size: 90%; line-height: 0;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{user_title}}</p>
                </a>
            </li>
        </ul>
        <div class="card-body">
            <h5 class="card-title">{{title}}</h5>
            <p class="card-text">{{content}}</p>
        </div>
    </div>
    <div class="card-header" id="likes-and-answers">
        <a>{{likes}} Likes</a>&nbsp;&nbsp;&nbsp;
        <a>{{answers}} Answers</a> {% if current_user != email %} {% if already_answered != 'True' %}
        <button class="btn btn-primary btn-sm" style="float: right; top: -100%;" onclick="popup_form('answer');">Answer</button> {% else %}
        <button class="btn btn-primary btn-sm" style="float: right; top: -100%;" title="You have already answered this Question" disabled>Answer</button> {% endif %} {% else %}
        <!-- <button class="btn btn-primary btn-sm" style="float: right; top: -100%;" title="You have already answered this Question" disabled>Answer</button>  -->
        <div class="dropdown" style="float: right;">
            <a class="btn btn-secondary btn-sm dropdown-toggle" style="color: white;;" role="button" type="button" id="navbarDarkDropdownMenuLink" data-toggle="dropdown" aria-expanded="false">
              Actions
            </a>
            <ul class="dropdown-menu dropdown-menu-dark dropdown-menu-end" aria-labelledby="navbarDarkDropdownMenuLink">
                <a class="dropdown-item" onclick="redirect_here('forum/edit/post/{{post_id}}');">Edit</a>
                <a class="dropdown-item" id="delete_option" onclick="redirect_here('forum/delete/post/{{post_id}}');">Delete</a>
            </ul>
        </div>
        {% endif %}
        <a style="float: right;"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-bookmark" width="32" height="32" viewBox="0 0 24 24" stroke-width="0.5" stroke="#008b8b" fill="none" stroke-linecap="round" stroke-linejoin="round">
        <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
        <path d="M9 4h6a2 2 0 0 1 2 2v14l-5 -3l-5 3v-14a2 2 0 0 1 2 -2" />
      </svg></a>
        <a style="float: right;"><svg xmlns="http://www.w3.org/2000/svg" width="23" height="23" fill="currentColor" class="bi bi-heart" viewBox="0 0 16 16">
        <path d="m8 2.748-.717-.737C5.6.281 2.514.878 1.4 3.053c-.523 1.023-.641 2.5.314 4.385.92 1.815 2.834 3.989 6.286 6.357 3.452-2.368 5.365-4.542 6.286-6.357.955-1.886.838-3.362.314-4.385C13.486.878 10.4.28 8.717 2.01L8 2.748zM8 15C-7.333 4.868 3.279-3.04 7.824 1.143c.06.055.119.112.176.171a3.12 3.12 0 0 1 .176-.17C12.72-3.042 23.333 4.867 8 15z"/>
      </svg></a>


        <!-- INCASE THE POST HAS ALREADY BEEN  SAVED -->

        <!-- <a style="float: right;"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-bookmark-off" width="36" height="36" viewBox="0 0 24 24" stroke-width="2" stroke="#008b8b" fill="none" stroke-linecap="round" stroke-linejoin="round">
        <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
        <line x1="3" y1="3" x2="21" y2="21" />
        <path d="M17 17v3l-5 -3l-5 3v-13m1.178 -2.818c.252 -.113 .53 -.176 .822 -.176h6a2 2 0 0 1 2 2v7" />
      </svg></a> -->

        <!-- INCASE THE POST HAS ALREADY BEEN LIKED  -->

        <!-- <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-heart-fill" viewBox="0 0 16 16">
        <path fill-rule="evenodd" d="M8 1.314C12.438-3.248 23.534 4.735 8 15-7.534 4.736 3.562-3.248 8 1.314z"/>
      </svg> -->
        <br>
    </div>

    <!-- ANSWERS AND REPLIES  -->

    {% if answers_exist == 'True' %} {% for answer in answers_list %}

    <div class="answers-and-replies" style="margin-top: 5vh;">
        <div class="answer">
            <div class="card" style="width: 100vw;">
                <ul class="list-group list-group-flush">
                    <li class="list-group-item">
                        <img src="{{answer.image}}" style="float: left;">
                        <a>
                            <a style="float: right;">
                            {{answer.time_stamp}}
                        </a>
                            <p style="padding-top: 0.3%; font-size: 110%;">&nbsp;&nbsp;&nbsp;&nbsp;{{answer.full_name}}</p>
                            <p style="font-size: 90%; line-height: 0;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{answer.user_title}}</p>
                        </a>
                    </li>
                </ul>
                <div class="card-body">
                    <h5 class="card-title">{{answer.answer_title}}</h5>
                    <p class="card-text">{{answer.answer_content}}</p>
                </div>
            </div>
            <div class="card-header" id="likes-and-answers">
                <a>{{answer.votes}} Votes</a>&nbsp;&nbsp;&nbsp; {% if current_user != answer.email %}
                <button class="btn btn-primary btn-sm" style="float: right; top: -100%;" onclick="popup_form('replying_to_answer,{{answer.answer_id}},{{answer.full_name}}');">Reply</button> {% else %}
                <div class="dropdown" style="float: right;">
                    <a class="btn btn-secondary btn-sm dropdown-toggle" style="color: white;;" role="button" type="button" id="navbarDarkDropdownMenuLink" data-toggle="dropdown" aria-expanded="false">
                      Actions
                    </a>
                    <ul class="dropdown-menu dropdown-menu-dark dropdown-menu-end" aria-labelledby="navbarDarkDropdownMenuLink">
                        <a class="dropdown-item" onclick="redirect_here('forum/edit/answer/{{answer.answer_id}}');">Edit</a>
                        <a class="dropdown-item" id="delete_option" onclick="redirect_here('forum/delete/answer/{{answer.answer_id}}');">Delete</a>
                    </ul>
                </div>
                {% endif %}
                <a style="float: right;"><svg xmlns="http://www.w3.org/2000/svg" width="23" height="23" fill="currentColor" class="bi bi-heart" viewBox="0 0 16 16">
                <path d="m8 2.748-.717-.737C5.6.281 2.514.878 1.4 3.053c-.523 1.023-.641 2.5.314 4.385.92 1.815 2.834 3.989 6.286 6.357 3.452-2.368 5.365-4.542 6.286-6.357.955-1.886.838-3.362.314-4.385C13.486.878 10.4.28 8.717 2.01L8 2.748zM8 15C-7.333 4.868 3.279-3.04 7.824 1.143c.06.055.119.112.176.171a3.12 3.12 0 0 1 .176-.17C12.72-3.042 23.333 4.867 8 15z"/>
              </svg> &nbsp;</a>

                <!-- INCASE THE POST HAS ALREADY BEEN LIKED  -->

                <!-- <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-heart-fill" viewBox="0 0 16 16">
                <path fill-rule="evenodd" d="M8 1.314C12.438-3.248 23.534 4.735 8 15-7.534 4.736 3.562-3.248 8 1.314z"/>
              </svg> -->
                <br>
            </div>
        </div>
    </div>

    {% for reply in replies_list %} {% if answer.answer_id == reply.answer_id %}
    <div class="reply">
        <div class="card">
            <ul class="list-group list-group-flush">
                <li class="list-group-item">
                    <a>
                        <a style="float: right;">
                        {{reply.time_stamp}}
                    </a>
                        <img src="{{reply.image}} " style="float: left;">

                        <p style="padding-top: 0.3%; font-size: 110%;">&nbsp;&nbsp;&nbsp;&nbsp;{{reply.full_name}} <br> <small>&nbsp;&nbsp;&nbsp; - replying to {{reply.replying_to}}</small></p>
                        <!-- <p style="font-size: 90%; line-height: 0;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;User's title</p> -->
                    </a>

            </ul>
            </li>

            <div class="card-body">
                <p class="card-text">{{reply.reply_content}}</p>
            </div>
        </div>
        <div class="card-header" id="likes-and-answers">
            <a>{{reply.likes}} Likes</a>&nbsp;&nbsp;&nbsp; {% if current_user != reply.email %}
            <button class="btn btn-primary btn-sm" style="float: right; top: -100%;" onclick="popup_form('replying_to_reply,{{answer.answer_id}},{{reply.full_name}}');">Reply</button> {% else %}
            <div class="dropdown" style="float: right;">
                <a class="btn btn-secondary btn-sm dropdown-toggle" style="color: white;;" role="button" type="button" id="navbarDarkDropdownMenuLink" data-toggle="dropdown" aria-expanded="false">
                  Actions
                </a>
                <ul class="dropdown-menu dropdown-menu-dark dropdown-menu-end" aria-labelledby="navbarDarkDropdownMenuLink">
                    <a class="dropdown-item" onclick="redirect_here('forum/edit/reply/{{reply.reply_id}}');">Edit</a>
                    <a class="dropdown-item" id="delete_option" onclick="redirect_here('forum/delete/reply/{{reply.reply_id}}');">Delete</a>
                </ul>
            </div>
            {% endif %}
            <a style="float: right;"><svg xmlns="http://www.w3.org/2000/svg" width="23" height="23" fill="currentColor" class="bi bi-heart" viewBox="0 0 16 16">
            <path d="m8 2.748-.717-.737C5.6.281 2.514.878 1.4 3.053c-.523 1.023-.641 2.5.314 4.385.92 1.815 2.834 3.989 6.286 6.357 3.452-2.368 5.365-4.542 6.286-6.357.955-1.886.838-3.362.314-4.385C13.486.878 10.4.28 8.717 2.01L8 2.748zM8 15C-7.333 4.868 3.279-3.04 7.824 1.143c.06.055.119.112.176.171a3.12 3.12 0 0 1 .176-.17C12.72-3.042 23.333 4.867 8 15z"/>
          </svg> &nbsp;</a>

            <!-- INCASE THE POST HAS ALREADY BEEN LIKED  -->

            <!-- <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-heart-fill" viewBox="0 0 16 16">
            <path fill-rule="evenodd" d="M8 1.314C12.438-3.248 23.534 4.735 8 15-7.534 4.736 3.562-3.248 8 1.314z"/>
          </svg> -->
            <br>
        </div>
    </div>

    {% endif %} {% endfor %} {% endfor %} {% endif %}
</div>







<style>
    #contactForm {
        width: 110%;
        padding-left: 20%;
    }
    
    #post_question {
        height: 10vh;
        width: 10vh;
        position: fixed;
        z-index: 1000000000000;
        bottom: 3vh;
        right: 3vw;
        border: none;
    }
    
    img {
        border-radius: 50%;
        height: 8vh;
        width: auto;
    }
    
    #likes-and-answers {
        height: 7.5vh;
    }
    
    .reply {
        margin-top: 3vh;
        width: 90vw;
        margin-left: 10vw;
    }
    
    #popup_form {
        display: none;
        position: absolute;
        height: 80vh;
        width: 80vw;
        margin-left: 10vw;
        z-index: 999999999;
        position: fixed;
        top: -5%;
    }
    
    #close_btn:hover {
        cursor: pointer;
    }
    
    #delete_option:hover {
        background-color: red;
    }
    
    @media all and (max-width: 800px) {
        #white-content {
            width: 80vw;
            height: 80vh;
        }
    }
    
    @media (min-height: 780px) {
        #likes-and-answers {
            height: 5.5vh;
        }
    }
    
    @media (min-height: 950px) {
        #likes-and-answers {
            height: 4.5vh;
        }
    }
    
    @media (min-height: 1100px) {
        #likes-and-answers {
            height: 3.5vh;
        }
    }
</style>



<script>
    function close_footer() {
        footer = document.getElementById('footer');

        footer.style.display = 'none';
    };

    function popup_form(action) {
        popup = document.getElementById('popup_form');
        body_tag = document.getElementsByTagName('body')[0];

        // body_tag.style.filter = "blur(8px)";


        popup.style.display = 'block';
        popup.style.backdropFilter = "blur(3px)";

        // manipulating form field names as per the action:

        form_heading = document.getElementById('form-heading');
        form_title = document.getElementById('form-title');
        explanation = document.getElementById('explanation');

        form_submit = document.getElementById('form-btn');


        if (action == 'ask') {
            form_heading.innerText = 'Ask a Question';
            form_title.style.display = 'block';
            explanation.innerText = 'Explain *';
            form_submit.value = "posting_question";

        } else if (action == 'answer') {
            form_heading.innerText = "Answer randomUser's question";
            form_title.style.display = 'block';
            explanation.innerText = 'Explain *';
            form_submit.value = 'answering_question';

        } else if (action.startsWith('replying_to_reply')) {

            form_heading.innerText = "Replying to randomUser's Reply";
            form_title.style.display = 'none';
            explanation.innerText = 'Explain';
            form_submit.value = action;

        } else {
            form_heading.innerText = "Reply to randomUser's answer";
            form_title.style.display = 'none';
            explanation.innerText = 'Explain *';
            form_submit.value = action;

        }
    };

    function close_popup(id_elem) {
        popup = document.getElementById(id_elem);
        popup.style.display = 'none';
    }


    function redirect_here(name) {
        window.location.pathname = name;
    };


    /* removing search section */

    search_section = document.getElementsByClassName('search-container')[0];

    search_section.style.display = 'none';
</script>

{% endblock content %}